(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{456:(e,t,a)=>{"use strict";a.d(t,{N:()=>o});var r=a(6617),i=a(846),s=a(1657);let o=(0,r.v)(e=>({roomCategories:s.$g,scene:{furniture:[]},selectedFurnitureId:"",setSelectedFurnitureId:t=>e({selectedFurnitureId:t}),addFurnitureToScene:function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],e(e=>({scene:{...e.scene,furniture:[...e.scene.furniture,{...t,id:(0,i.Ak)()}]}}))},removeFurnitureFromScene:t=>e(e=>({scene:{...e.scene,furniture:e.scene.furniture.filter(e=>e.id!==t)}})),updatePlacedFurnitureById:(t,a)=>e(e=>({scene:{...e.scene,furniture:e.scene.furniture.map(e=>e.id===t?{...e,...a}:e)}})),cameraView:"orbit",setCameraView:t=>e({cameraView:t}),interactiveMode:{mode:"none",targetId:null,startPosition:null,startRotation:null,startScale:null},setInteractiveMode:t=>e(e=>({interactiveMode:{...e.interactiveMode,...t}}))}))},796:(e,t,a)=>{"use strict";a.d(t,{v:()=>r});let r=(0,a(6617).v)((e,t)=>({gl:null,scene:null,camera:null,imageDataUrl:null,setRefs:(t,a,r)=>e({gl:t,scene:a,camera:r}),setImageDataUrl:a=>{let r=t().imageDataUrl;r&&URL.revokeObjectURL(r),e({imageDataUrl:a})},clearImageDataUrl:()=>{let a=t().imageDataUrl;a&&a.startsWith("blob:")&&URL.revokeObjectURL(a),e({imageDataUrl:null})}}))},947:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(4439);let i=(e,t,a)=>{var i,s,o,n;let l=(0,r.U)(e,t.dimensions,t.scale,null!=(s=null==(i=t.rotation)?void 0:i[1])?s:0);for(let e of a){let t=(0,r.U)(e.position,e.dimensions,e.scale,null!=(n=null==(o=e.rotation)?void 0:o[1])?n:0);if(l.minX<t.maxX&&l.maxX>t.minX&&l.minY<t.maxY&&l.maxY>t.minY&&l.minZ<t.maxZ&&l.maxZ>t.minZ)return!1}let d={minX:-5,maxX:5,minZ:-4.8,maxZ:4.8};return!(l.minX<d.minX)&&!(l.maxX>d.maxX)&&!(l.minZ<d.minZ)&&!(l.maxZ>d.maxZ)}},1657:(e,t,a)=>{"use strict";a.d(t,{$g:()=>r,As:()=>i,Du:()=>s,sf:()=>o});let r=[{id:"bedroom",name:"Bedroom",imageUrl:"https://images.unsplash.com/photo-1618221118493-9cfa1a1c00da?q=80&w=1332&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",furniture:[{id:"cabinet-1",name:"Gallinera Table",description:"Technically a cabinet, secretly a portal to a world of lost socks and mystery snacks.",type:"cabinet",categoryId:"bedroom",modelPath:"/models/gothicCabinet/model.gltf",previewImage:"/models/gothicCabinet/preview.webp"},{id:"bed-1",name:"Gothic Bed",description:"Sleep like royalty—or a vampire. Either way, you’re not getting up early.",type:"bed",categoryId:"bedroom",modelPath:"/models/gothicBed/model.gltf",previewImage:"/models/gothicBed/preview.webp"},{id:"cabinet-2",name:"Whimsicrate",description:"Technically a cabinet, secretly a portal to a world of lost socks and mystery snacks.",type:"cabinet",categoryId:"bedroom",modelPath:"/models/paintedWoodenCabinet/model.gltf",previewImage:"/models/paintedWoodenCabinet/preview.webp"},{id:"chair-1",name:"Brushstroke Butler",description:"Holds you up like a masterpiece in motion.",type:"chair",categoryId:"bedroom",modelPath:"/models/paintedWoodenChair/model.gltf",previewImage:"/models/paintedWoodenChair/preview.webp"},{id:"chair-2",name:"Chairy Potter",description:"The chosen seat for wizarding comfort.",type:"chair",categoryId:"bedroom"},{id:"bed-2",name:"Naplord 3000",description:"Initiates instant hibernation mode.",type:"bed",categoryId:"bedroom"},{id:"bed-3",name:"Closet Goblin",description:"Consumes clutter like a pro.",type:"cabinet",categoryId:"bedroom"},{id:"chair-3",name:"Sleepy Sitter",description:"For when you’re too tired to bed.",type:"chair",categoryId:"bedroom"},{id:"table-1",name:"Nightstand Ninja",description:"Guards your glasses and bad decisions.",type:"table",categoryId:"bedroom"},{id:"sofa-1",name:"Mini Couchy",description:"Because even your socks deserve a couch.",type:"sofa",categoryId:"bedroom"}]},{id:"livingRoom",name:"Living Room",imageUrl:"https://images.unsplash.com/photo-1605774337664-7a846e9cdf17?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",furniture:[{id:"table-2",name:"Gallinera Table",description:"A rustic charm with room for gossip, snacks, or spontaneous dance moves.",type:"table",categoryId:"livingRoom",modelPath:"/models/gallineraTable/model.gltf",previewImage:"/models/gallineraTable/preview.webp"},{id:"sofa-2",name:"Emperor’s Lounge",description:"A Chinese sofa fit for ancient chill sessions.",type:"sofa",categoryId:"livingRoom",modelPath:"/models/chineseSofa/model.gltf",previewImage:"/models/chineseSofa/preview.webp"},{id:"sofa-3",name:"Shadow Hugger",description:"Absorbs light—and your will to get up again.",type:"sofa",categoryId:"livingRoom",modelPath:"/models/blackSofa/model.gltf",previewImage:"/models/blackSofa/preview.webp"},{id:"sofa-4",name:"Cloud Couch",description:"Whiter than your laundry ever will be.",type:"sofa",categoryId:"livingRoom",modelPath:"/models/whiteSofa/model.gltf",previewImage:"/models/whiteSofa/preview.webp"},{id:"chair-4",name:"Ottoman",description:"Not quite a chair, not quite a table—just vibes and footrest royalty.",type:"chair",categoryId:"livingRoom",modelPath:"/models/ottoman/model.gltf",previewImage:"/models/ottoman/preview.webp"},{id:"table-4",name:"Round Wooden Table",description:"Circle of life? Nah—circle of snacks, coffee, and deep conversations.",type:"table",categoryId:"livingRoom",modelPath:"/models/roundWoodenTable/model.gltf",previewImage:"/models/roundWoodenTable/preview.webp"},{id:"table-5",name:"Side Table",description:"The loyal sidekick your coffee never knew it needed.",type:"table",categoryId:"livingRoom",modelPath:"/models/sideTable/model.gltf",previewImage:"/models/sideTable/preview.webp"},{id:"table-6",name:"Table Swift",description:"Write songs, sip coffee—this table does it all.",type:"table",categoryId:"livingRoom"},{id:"sofa-5",name:"Sofapalooza",description:"Three cushions. Infinite naps.",type:"sofa",categoryId:"livingRoom"},{id:"sofa-6",name:"Couchzilla",description:"Crushes your back pain, not your dreams.",type:"sofa",categoryId:"livingRoom"},{id:"chair-5",name:"Sir Sits-a-Lot",description:"A noble seat for royal cheeks.",type:"chair",categoryId:"livingRoom"},{id:"table-7",name:"Remote Island",description:"Home of remotes, snacks, and mystery crumbs.",type:"table",categoryId:"livingRoom"},{id:"cabinet-3",name:"Media Fortress",description:"Defends DVDs like it's 2005.",type:"cabinet",categoryId:"livingRoom"}]},{id:"dining",name:"Dining",imageUrl:"https://images.unsplash.com/photo-1617806118233-18e1de247200?q=80&w=2232&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",furniture:[{id:"table-3",name:"Espresso Express",description:"Where mugs gather for deep conversations.",type:"table",categoryId:"dining",modelPath:"/models/coffeeTable/model.gltf",previewImage:"/models/coffeeTable/preview.webp"},{id:"stool-1",name:"Painted Perch",description:"Short, stylish, and surprisingly supportive.",type:"chair",categoryId:"dining",modelPath:"/models/paintedWoodenStool/model.gltf",previewImage:"/models/paintedWoodenStool/preview.webp"},{id:"table-8",name:"Oak Overlord",description:"This wooden table fears no gravy spill.",type:"table",categoryId:"dining",modelPath:"/models/WoodenTable/model.gltf",previewImage:"/models/WoodenTable/preview.webp"},{id:"table-9",name:"Feast Field",description:"A battlefield for forks and opinions.",type:"table",categoryId:"dining"},{id:"chair-6",name:"Butt Buffet",description:"Seats the cheeks of champions.",type:"chair",categoryId:"dining"},{id:"cabinet-4",name:"Plate Vault",description:"Guards grandma’s fancy china.",type:"cabinet",categoryId:"dining"},{id:"sofa-7",name:"Banquet Bench",description:"When you need room for one more cousin.",type:"sofa",categoryId:"dining"},{id:"bed-4",name:"Food Coma Couch",description:"Not a bed, but sure feels like it after dinner.",type:"bed",categoryId:"dining"}]}],i=[{name:"dot-light-theme",style:{backgroundImage:"radial-gradient(circle, #d1d5db 1px, transparent 1px)",backgroundSize:"20px 20px"}},{name:"dark-light-theme",style:{backgroundColor:"#1B1C1E",backgroundImage:"radial-gradient(circle, #d1d5db 1px, transparent 1px)",backgroundSize:"20px 20px"}},{name:"light-theme",style:{backgroundColor:"#f6f7f8"}},{name:"dark-theme",style:{backgroundColor:"#1B1C1E"}}],s=[{key:"bedroom",name:"Bedroom"},{key:"living_room",name:"Living Room"},{key:"dining_room",name:"Dining Room"}],o=[{key:"modern",name:"Modern"},{key:"minimalist",name:"Minimalist"},{key:"industrial_loft",name:"Industrial Loft"}]},2446:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(3462),i=a(4890);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,r.$)(t))}},2788:(e,t,a)=>{"use strict";a.d(t,{a:()=>i});var r=a(3764);function i(){let[e,t]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}},3138:(e,t,a)=>{"use strict";a.d(t,{default:()=>I});var r=a(7096),i=a(3764),s=a(3237),o=a(7146),n=a(2411),l=a(2446),d=a(1726),c=a(4976),m=a(8696),u=a(1623),p=a(9079);function h(e){let{delayDuration:t=0,...a}=e;return(0,r.jsx)(p.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function x(e){let{...t}=e;return(0,r.jsx)(h,{children:(0,r.jsx)(p.bL,{"data-slot":"tooltip",...t})})}function g(e){let{...t}=e;return(0,r.jsx)(p.l9,{"data-slot":"tooltip-trigger",...t})}function f(e){let{className:t,sideOffset:a=0,children:i,...s}=e;return(0,r.jsx)(p.ZL,{children:(0,r.jsxs)(p.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,l.cn)("bg-white shadow-xl text-primary-600 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[i,(0,r.jsx)(p.i3,{className:"bg-white fill-white z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var b=a(4273),y=a(456),v=a(9333),w=a(2788),j=a(8593),N=a(947),k=a(4439);let I=e=>{let{className:t}=e,[a,p]=(0,i.useState)(null),[h,I]=(0,i.useState)(!0),{roomCategories:S,addFurnitureToScene:C,scene:P}=(0,y.N)(),A=(0,w.a)(),{addNotification:M}=(0,b.i)(),z=P.furniture,D=async e=>{let t=null,a=(0,k.Y)(e.type).dimensions;if(e.modelPath)try{t=(await v.Q.preloadModel(e.modelPath)).dimensions}catch(e){t=a}else t=a;let r=e.color||R(),i={...e,position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],dimensions:t||{width:1,height:1,depth:1},...!e.modelPath&&{color:r}};if((0,N.E)(i.position,i,z))C(i),M({title:"Added ".concat(e.name," to scene"),state:"success"});else{let t=!1;for(let a=-5;a<=5&&!t;a+=.5)for(let r=-5;r<=5&&!t;r+=.5){let s=[a,0,r];(0,N.E)(s,i,z)&&(C({...i,position:s}),M({title:"Added ".concat(e.name," to scene"),state:"success"}),t=!0)}t||M({title:"Cannot add ".concat(e.name," to scene"),description:"No space available for this furniture",state:"error"})}},R=()=>{let e=Math.floor(0xffffff*Math.random()).toString(16);return"#".concat(e.padStart(6,"0"))};return(0,r.jsxs)("aside",{className:(0,l.cn)("relative transition-all flex shadow-xs xl:h-[calc(100svh-64px)] h-[calc(100svh-32px)] rounded-xl bg-white border pt-8",h?"w-1/3 max-w-[240px] border-gray-200":"w-5 max-w-[20px] border-transparent",t),children:[(0,r.jsx)(j.$,{variant:"icon",className:"rounded-full absolute top-[-10px] right-[-10px] w-10 h-10 border hover:bg-primary-50 bg-white",onClick:()=>I(!h),children:h?(0,r.jsx)(d.A,{className:"size-5"}):(0,r.jsx)(c.A,{className:"size-5"})}),A?(0,r.jsx)("div",{className:"bg-secondary-50 w-full rounded-md m-2"}):(0,r.jsxs)(o.Uu,{initial:{opacity:0},animate:h?{opacity:100}:{opacity:0},transition:{duration:.3,delay:.2},className:(0,l.cn)("overflow-auto flex shrink-0",h?"w-full":"w-0 invisible"),children:[(0,r.jsxs)("section",{className:(0,l.cn)("flex flex-col gap-3 shrink-0 w-full",a&&"hidden"),children:[(0,r.jsx)("h4",{className:"font-semibold md:px-3 px-2",children:"Browse furniture by room"}),(0,r.jsx)("ul",{className:"mt-2 flex flex-col gap-4 grow overflow-y-auto md:px-3 px-2",children:S.map(e=>(0,r.jsxs)("li",{className:"relative group shrink-0 cursor-pointer h-40 overflow-hidden rounded-lg",onClick:()=>p(e),children:[e.imageUrl&&(0,r.jsx)(s.default,{alt:e.name,src:e.imageUrl,fill:!0,className:"object-cover mx-auto w-full rounded-lg group-hover:scale-110 transition-all duration-300 opacity-80 group-hover:opacity-100",priority:!0,sizes:"(max-width: 768px) 100vw, 50vw",placeholder:"blur",blurDataURL:"/images/placeholder.webp"}),(0,r.jsx)("div",{className:"relative flex items-end h-full p-1",children:(0,r.jsx)("span",{className:"text-white font-semibold bg-primary-500/90 py-0.5 px-2 rounded-2xl",children:e.name})})]},e.id))})]}),a&&(0,r.jsxs)("section",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-1 md:px-3 px-2",children:[(0,r.jsxs)(j.$,{variant:"link",onClick:()=>p(null),children:[(0,r.jsx)(m.A,{className:"size-4"}),(0,r.jsx)("span",{className:"text-sm",children:"Back"})]}),(0,r.jsxs)("h4",{className:"font-semibold",children:[a.name," furniture"]}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[a.furniture.length," item",a.furniture.length>1?"s":""]})]}),(0,r.jsx)("section",{className:"grow overflow-auto",children:(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3 md:p-3 p-2",children:a.furniture.map(e=>{let t=(null==e?void 0:e.previewImage)||(0,k.Y)(e.type).imagePreview;return(0,r.jsx)(n.N,{mode:"wait",children:(0,r.jsxs)(o.vi,{type:"button",initial:{y:10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},className:(0,l.cn)("relative rounded cursor-pointer h-42 w-full flex flex-col border-gray-300 gap-2 border hover:border-primary-600 overflow-hidden p-1 hover:ring-4 ring-primary-600"),onClick:()=>{D(e)},children:[(0,r.jsxs)(x,{children:[(0,r.jsx)(g,{asChild:!0,children:(0,r.jsx)(u.A,{className:"absolute size-3 top-2 right-2 text-gray-600 opacity-50"})}),(0,r.jsxs)(f,{className:"space-y-0.5 text-xs text-gray-500 max-w-40",children:[(0,r.jsx)("p",{className:"font-semibold",children:e.name}),(0,r.jsx)("hr",{}),(0,r.jsx)("p",{children:e.description})]})]}),(0,r.jsx)("div",{className:"relative flex grow overflow-hidden bg-gray-100 rounded-sm p-1",children:t&&(0,r.jsx)(s.default,{alt:e.name,src:t,fill:!0,className:"object-contain m-auto",placeholder:"blur",blurDataURL:"/images/placeholder.webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),(0,r.jsx)("span",{className:"text-xs font-medium h-8 flex items-center justify-center text-center line-clamp-2",children:e.name})]},e.id)},e.id)})})})]})]})]})}},4273:(e,t,a)=>{"use strict";a.d(t,{i:()=>s});var r=a(6617),i=a(846);let s=(0,r.v)(e=>({notifications:[],addNotification:t=>e(e=>({notifications:[...e.notifications,{...t,id:(0,i.Ak)()}]})),removeNotification:t=>e(e=>({notifications:e.notifications.filter(e=>e.id!==t)})),clearNotifications:()=>e({notifications:[]})}))},4439:(e,t,a)=>{"use strict";a.d(t,{U:()=>i,Y:()=>r});let r=e=>{let t={width:1,height:1,depth:1},a="";switch(e){case"chair":t={width:.6,height:.8,depth:.6},a="https://images.unsplash.com/photo-1567538096630-e0c55bd6374c?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D";break;case"table":t={width:1.2,height:.8,depth:.8},a="https://images.unsplash.com/photo-1559051668-934cd674493c?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D";break;case"sofa":t={width:2,height:.8,depth:.9},a="https://images.unsplash.com/photo-1512212621149-107ffe572d2f?q=80&w=1780&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D";break;case"bed":t={width:1.6,height:.6,depth:2},a="https://images.unsplash.com/photo-1635594202056-9ea3b497e5c0?q=80&w=1180&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D";break;case"cabinet":t={width:1,height:2,depth:.5},a="https://images.unsplash.com/photo-1591129841117-3adfd313e34f?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}return{dimensions:t,imagePreview:a}},i=function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,[i,s,o]=e,n=t.width*a[0],l=t.height*a[1],d=t.depth*a[2],c=(r%(2*Math.PI)+2*Math.PI)%(2*Math.PI),m=Math.abs(Math.sin(c)),u=Math.abs(Math.cos(c)),p=n*u+d*m,h=n*m+d*u;return{minX:i-p/2,maxX:i+p/2,minY:s-l/2,maxY:s+l/2,minZ:o-h/2,maxZ:o+h/2}}},4962:(e,t,a)=>{"use strict";a.d(t,{r:()=>r});let r=(0,a(6617).v)(e=>({loadingFullScreen:!1,setLoadingFullScreen:t=>e({loadingFullScreen:t})}))},4973:(e,t,a)=>{"use strict";a.d(t,{default:()=>X});var r=a(7096),i=a(3764),s=a(1369),o=a(3237),n=a(2446),l=a(7146),d=a(2411),c=a(3930),m=a(6617),u=a(1657);let p=(0,m.v)(e=>({refId:"",setRefId:t=>e({refId:t}),spaceTypeOptions:u.Du,spaceType:"living_room",setSpaceType:t=>e({spaceType:t}),spaceStyleOptions:u.sf,spaceStyle:"modern",setSpaceStyle:t=>e({spaceStyle:t}),poolResult:null,setPoolResult:t=>e({poolResult:t})}));var h=a(796),x=a(4273),g=a(456),f=a(8593),b=a(8943),y=a(2437),v=a(4962);function w(e){let{...t}=e;return(0,r.jsx)(b.bL,{"data-slot":"dialog",...t})}function j(e){let{...t}=e;return(0,r.jsx)(b.ZL,{"data-slot":"dialog-portal",...t})}function N(e){let{className:t,...a}=e,{loadingFullScreen:i}=(0,v.r)();return(0,r.jsx)(b.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 bg-black/50",t,i?"z-1":"z-40"),...a})}function k(e){let{className:t,children:a,showCloseButton:i=!0,...s}=e,{loadingFullScreen:o}=(0,v.r)();return(0,r.jsxs)(j,{"data-slot":"dialog-portal",children:[(0,r.jsx)(N,{}),(0,r.jsxs)(b.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background flex flex-col max-h-[90svh] overflow-hidden data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border shadow-lg duration-200",t,o?"z-1":"z-50",i?"md:py-6 py-4 ":"md:pb-6 pb-4 "),...s,children:[a,i&&(0,r.jsxs)(b.bm,{"data-slot":"dialog-close",className:"p-2 ring-offset-background !outline-none cursor-pointer text-gray-400 hover:text-gray-500 focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-3 right-4 rounded-xs focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(y.A,{className:"size-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function I(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left  md:px-6 px-4",t),...a})}function S(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-body",className:(0,n.cn)("grow overflow-auto flex flex-col md:px-6 px-4",t),...a})}function C(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row  md:px-6 px-4",t),...a})}function P(e){let{className:t,...a}=e;return(0,r.jsx)(b.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",t),...a})}function A(e){let{className:t,...a}=e;return(0,r.jsx)(b.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}var M=a(4393);function z(e){let{...t}=e;return(0,r.jsx)(M.bL,{"data-slot":"dropdown-menu",...t})}function D(e){let{...t}=e;return(0,r.jsx)(M.l9,{"data-slot":"dropdown-menu-trigger",...t})}function R(e){let{className:t,sideOffset:a=4,...i}=e;return(0,r.jsx)(M.ZL,{children:(0,r.jsx)(M.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...i})})}function E(e){let{className:t,inset:a,variant:i="default",...s}=e;return(0,r.jsx)(M.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":i,className:(0,n.cn)("group focus:bg-accent cursor-pointer font-medium focus:text-accent-foreground data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-error-50 dark:data-[variant=destructive]:focus:bg-error-50 data-[variant=destructive]:*:[&_svg:not([class*='text-'])]:text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex items-center gap-2 rounded-md px-2.5 py-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}var U=a(8377),T=a(8805);let B=e=>{let{items:t,selectedItem:a,handleSetSelectedItem:s,placeholder:o="เลือก",label:l,requiredLabel:d,className:c,dropdownClassName:m,isItemsFullWidth:u,getFormatText:p}=e,h=(0,i.useId)(),x=(0,i.useRef)(null),[g,f]=(0,i.useState)(0);return(0,i.useEffect)(()=>{if(x.current){var e;f(null==(e=x.current)?void 0:e.offsetWidth)}},[x.current]),(0,r.jsxs)("div",{className:(0,n.cn)("space-y-1.5",c),children:[l&&(0,r.jsxs)("label",{htmlFor:h,className:"whitespace-nowrap",children:[l,d?(0,r.jsx)("span",{className:"text-error-600 inline font-medium",children:"*"}):""]}),(0,r.jsxs)(z,{children:[(0,r.jsxs)(D,{ref:x,className:(0,n.cn)("w-full cursor-pointer hover:bg-gray-50 data-[state=open]:ring-4 ring-primary-shadow flex items-center justify-between gap-2 border border-gray-300 shadow-xs bg-white rounded-lg py-2.5 px-3.5",m),children:[p?p(a):null!=a?a:(0,r.jsx)("span",{className:"text-gray-500",children:o}),(0,r.jsx)(U.A,{className:"data-[state=open]:rotate-180 text-gray-500 size-5"})]}),(0,r.jsx)(R,{align:"end",style:g?{maxWidth:g,width:u?g:"100%"}:{maxWidth:"calc(100svw - 32px)"},className:(0,n.cn)("sm:min-w-[240px]"),children:t.map((e,t)=>{let i=a===e;return(0,r.jsxs)(E,{className:"flex items-start justify-between",onClick:()=>{s(e,t)},children:[(0,r.jsx)("span",{children:p?p(e):e}),i&&(0,r.jsx)(T.A,{className:"size-4 text-primary-600 shrink-0 mt-0.5"})]},t)})})]})]})};var L=a(1508);let W=e=>{var t,a;let{open:l,setOpen:d,className:c}=e,m=(0,i.useId)(),u=(0,s.useSearchParams)(),{loadingFullScreen:g,setLoadingFullScreen:b}=(0,v.r)(),{imageDataUrl:y,clearImageDataUrl:j}=(0,h.v)(),{spaceType:N,setSpaceType:M,spaceTypeOptions:z,spaceStyleOptions:D,spaceStyle:R,setSpaceStyle:E,setRefId:U}=p(),{addNotification:T}=(0,x.i)(),[W,F]=(0,i.useTransition)(),G=z.map(e=>e.name),H=null==(t=z.find(e=>e.key===N))?void 0:t.name,_=D.map(e=>e.name),Y=null==(a=D.find(e=>e.key===R))?void 0:a.name,O=()=>{j(),d(!1)};return(0,r.jsx)(w,{open:l,onOpenChange:d,children:(0,r.jsxs)(k,{className:(0,n.cn)(c),style:g?{zIndex:0}:{},children:[(0,r.jsxs)(I,{className:(0,n.cn)("relative"),children:[(0,r.jsx)(P,{className:"text-gray-900",children:"Confirm Image Generation"}),(0,r.jsx)(A,{children:"Send the screenshot to generate a styled version"})]}),(0,r.jsxs)(S,{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-row w-full items-end gap-4 pt-1",children:[(0,r.jsx)(B,{items:G,selectedItem:H||"",handleSetSelectedItem:(e,t)=>{M(z[t].key)},label:"Space Type:",placeholder:"Select space type",className:"flex flex-row items-center gap-3 text-sm"}),(0,r.jsx)("div",{className:"h-10 w-px bg-gray-300"}),(0,r.jsx)(B,{items:_,selectedItem:Y||"",handleSetSelectedItem:(e,t)=>{E(D[t].key)},label:"Space Style:",placeholder:"Select space style",className:"flex flex-row items-center gap-3 text-sm"})]}),(0,r.jsx)("div",{className:"bg-gray-50 mx-auto flex overflow-auto",children:y&&(0,r.jsx)(o.default,{alt:"Room simulator",src:y,width:400,height:400,className:"object-contain h-[600px] max-h-[100svh_-_64px] w-[600px]"})})]}),(0,r.jsxs)(C,{className:"flex items-center gap-3",children:[(0,r.jsx)(f.$,{variant:"secondary",className:"grow basis-0",onClick:O,children:"Cancel"}),(0,r.jsxs)(f.$,{autoFocus:!0,className:"grow basis-0",onClick:()=>{y&&F(async()=>{b(!0);let e="";try{let t=await fetch("/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:y})}),a=await t.json();if(t.ok)e=a.url;else throw Error(a.error||"Upload to R2 failed");let r={model:"spacely-v1",imageUrl:e,spaceType:N,spaceStyle:R,renovateType:"residential"},i=await fetch("".concat("https://api.spacely.ai/api","/v1/generate/standard"),{method:"POST",headers:{"Content-Type":"application/json","X-API-KEY":"sk-ibTAcMYJrMddDZjRGRLuUXSHHKg"},body:JSON.stringify(r)});if(i.ok){let e=await i.json();U(e.data);let t=new URLSearchParams(u.toString());t.set("refId",e.data),window.history.pushState(null,"","?".concat(t.toString()))}else throw Error(a.error||"Upload to space generator failed")}catch(e){console.error(e),T({title:"Error",description:"Sorry, we are unable to generate image from canvas. Please try again.",state:"error"})}finally{b(!1),O()}})},disabled:W,children:[(0,r.jsx)(L.A,{}),"Generate"]})]})]})},m)};var F=a(1759),G=a(81),H=a(1562);let _=()=>(0,r.jsx)(r.Fragment,{children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"animate-pulse rounded aspect-video h-[120px] w-auto bg-white/80"},t))}),Y=e=>{let{open:t,setOpen:a,images:s,currentIndex:c,setCurrentIndex:m,className:u}=e,p=(0,i.useId)(),[h,x]=(0,i.useState)(1),g=s[c],b=()=>{let e=c-1;if(e<0)return void m(s.length-1);x(-1),m(e)},y=()=>{let e=c+1;if(e>=s.length)return void m(0);x(1),m(e)},v=e=>{"ArrowRight"===e.key?y():"ArrowLeft"===e.key?b():"Escape"===e.key&&a(!1)};return(0,i.useEffect)(()=>{if(t)return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[c,t]),(0,r.jsx)(w,{open:t,onOpenChange:a,children:(0,r.jsxs)(k,{showCloseButton:!1,className:(0,n.cn)(u),children:[(0,r.jsxs)(I,{className:(0,n.cn)("relative"),children:[(0,r.jsx)(P,{className:""}),(0,r.jsx)(A,{})]}),(0,r.jsx)(S,{className:"px-2 relative ",children:(0,r.jsx)(d.N,{mode:"wait",initial:!1,children:(0,r.jsx)(l.Uu,{initial:{x:1===h?100:-100,opacity:0},animate:{x:0,opacity:1},exit:{x:1===h?-100:100,opacity:0},transition:{duration:.2},children:(0,r.jsx)(o.default,{alt:"Image ".concat(c+1),src:g,width:640,height:640,className:"object-contain xl:h-[640px] md:h-[600px] sm:h-[550px] h-[500px] data-[loaded=false]:animate-pulse data-[loaded=false]:bg-gray-100/10","data-loaded":"false",onLoad:e=>{e.currentTarget.setAttribute("data-loaded","true")},placeholder:"blur",blurDataURL:"/images/placeholder_md.webp"})},g)})}),(0,r.jsx)(C,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsx)(f.$,{"aria-label":"Previous image",variant:"secondary",onClick:b,children:(0,r.jsx)(G.A,{})}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[c+1," of ",s.length]}),(0,r.jsx)(f.$,{"aria-label":"Next image",variant:"secondary",onClick:y,children:(0,r.jsx)(H.A,{})})]})})]})},p)},O=e=>{let{images:t,className:a}=e,[s,d]=(0,i.useState)(null),c=null!==s;return 0===t.length?null:(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsx)(Y,{open:c,setOpen:e=>{e||d(null)},images:t,currentIndex:null!=s?s:0,setCurrentIndex:d}),t.map((e,t)=>(0,r.jsx)(l.Uu,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:(0,n.cn)("hover:cursor-zoom-in snap-center",a),onClick:()=>d(t),children:(0,r.jsx)(o.default,{alt:"result-".concat(t),src:e,width:200,height:140,className:"h-[120px] w-auto object-contain rounded"})},t))]})},X=e=>{let{className:t}=e,[a,o]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!1),[b,y]=(0,i.useState)(!1),v=(0,s.useSearchParams)(),w=(0,i.useRef)(null),{refId:j,setRefId:N,poolResult:k,setPoolResult:I}=p(),{gl:S,camera:C,scene:P,setImageDataUrl:A}=(0,h.v)(),{addNotification:M}=(0,x.i)(),{setSelectedFurnitureId:z}=(0,g.N)(),D=e=>{null==P||P.traverse(t=>{t.name.startsWith("label:")&&(t.visible=e)})},R=async()=>{if(z(""),!S||!C||!P)return;D(!1);let e=C.position.clone(),t=C.rotation.clone(),a=S.getSize(new c.I9Y),r=S.getPixelRatio(),i=C.fov,s=+a.x,n=+a.y;S.setSize(s,n,!1),S.setPixelRatio(+r),C.position.set(0,3,15),C.lookAt(0,4,0),S.render(P,C);let l=S.domElement.toDataURL("image/png");A(l),S.setSize(a.x,a.y,!1),S.setPixelRatio(r),C.position.copy(e),C.rotation.copy(t),C.fov=i,C.updateProjectionMatrix(),D(!0),l?o(!0):M({title:"Error",description:"Sorry, we are unable to generate image from canvas. Please try again.",state:"error"})};(0,i.useEffect)(()=>{v.get("refId")&&!j&&N(v.get("refId"))},[v]),(0,i.useEffect)(()=>{if(!j)return;y(!1);let e=new AbortController,t=()=>{w.current&&(clearInterval(w.current),w.current=null)},a=!1,r=async()=>{try{let i=await fetch("".concat("https://api.spacely.ai/api","/v1/generate/poll-result?refId=").concat(j),{method:"GET",headers:{"X-API-KEY":"sk-ibTAcMYJrMddDZjRGRLuUXSHHKg"},signal:e.signal});if(i.ok){var r;let e=await i.json();I(null==e?void 0:e.data);let s=null==e||null==(r=e.data)?void 0:r.status;("failed"===s||"success"===s)&&(a=!0,"success"===s?M({title:"Completed space generation",description:"We have successfully generated image from Space Generator API.",state:"success"}):M({title:"Failed to generate space",description:"Sorry, we are unable to generate image from Space Generator API.",state:"error"}),t())}else throw Error("Upload to fetch space generator result")}catch(e){"AbortError"!==e.name&&(console.error("Polling failed:",e),a=!0,t(),y(!0),M({title:"Error: ".concat(e.message),description:"Sorry, we are unable to get generated image from Space Generator API.",state:"error"}),(()=>{N("");let e=new URLSearchParams(v.toString());e.delete("refId"),window.history.replaceState(null,"","?".concat(e.toString()))})())}};return r(),a||(w.current=setInterval(()=>{r()},5e3)),()=>{e.abort(),t()}},[j]);let E=(0,r.jsxs)(f.$,{className:"ml-auto mb-0.5",onClick:R,variant:(null==k?void 0:k.result)?"ghost-secondary":"default",disabled:(null==k?void 0:k.status)==="processing",children:[(null==k?void 0:k.result)?(0,r.jsx)(F.A,{}):(0,r.jsx)(L.A,{}),"Generate from Scene"]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)(r.Fragment,{}),children:(0,r.jsx)(W,{open:a,setOpen:o})}),(0,r.jsxs)("section",{className:(0,n.cn)("flex flex-col gap-3",t),children:[!(null==k?void 0:k.result)&&!j&&E,j&&k&&(0,r.jsxs)("section",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-end justify-between",children:[(0,r.jsx)("div",{className:(0,n.cn)("flex items-center gap-1.5 bg-primary-50 w-fit px-4 py-1",m?"rounded-2xl":"rounded-t-2xl"),children:"success"===k.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.A,{className:"shrink-0 size-4 text-primary-700"}),(0,r.jsx)("div",{className:"text-primary-600 font-semibold",children:"Result"})]}):"processing"===k.status?(0,r.jsxs)("div",{className:"flex items-end gap-1",children:[(0,r.jsxs)("div",{className:"text-gray-600 text-sm",children:["Loading result"," ",(0,r.jsxs)("span",{className:"text-xs",children:["(",k.progress,"%)"]})]}),(0,r.jsxs)("div",{className:"flex gap-0.5 mb-1.5",children:[(0,r.jsx)("div",{className:"h-1 w-1 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.3s]"}),(0,r.jsx)("div",{className:"h-1 w-1 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.15s]"}),(0,r.jsx)("div",{className:"h-1 w-1 bg-gray-600 rounded-full animate-bounce"})]})]}):(0,r.jsx)(r.Fragment,{})}),(0,r.jsxs)(f.$,{variant:"icon",className:"",size:"xs",onClick:()=>u(!m),children:[m?"Show":"Hide",(0,r.jsx)("div",{className:"w-3",children:(0,r.jsx)(U.A,{className:(0,n.cn)("transition-transform",m?"rotate-180":"")})})]}),(null==k?void 0:k.status)!=="processing"&&E]}),(0,r.jsx)(d.N,{children:(0,r.jsxs)(l.Uu,{animate:{opacity:+!m,y:m?-10:0,height:m?0:"auto"},initial:!1,transition:{duration:.4,ease:"easeInOut"},style:{overflow:"hidden"},className:"shrink-0",children:[(null==k?void 0:k.status)==="processing"&&(0,r.jsx)("div",{className:"relative w-full h-2 bg-primary-300 overflow-hidden rounded-tr-md -mb-2",children:(0,r.jsx)("div",{style:{width:"".concat(k.progress,"%")},className:(0,n.cn)("absolute h-full left-0 bg-primary-600 rounded-r-xl")})}),(0,r.jsxs)("section",{className:"overflow-auto h-35 flex flex-row gap-3 px-6 py-2 bg-primary-50 rounded-b-2xl rounded-r-2xl justify-center",children:[(null==k?void 0:k.status)==="processing"&&(0,r.jsx)(_,{}),(0,r.jsx)(O,{className:(0,n.cn)((null==k?void 0:k.status)!=="success"&&"hidden"),images:k.result})]})]})})]})]})]})}},5064:(e,t,a)=>{Promise.resolve().then(a.bind(a,5835)),Promise.resolve().then(a.bind(a,1030)),Promise.resolve().then(a.bind(a,3138)),Promise.resolve().then(a.bind(a,5287)),Promise.resolve().then(a.bind(a,4973))},5287:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var r=a(7096),i=a(6791),s=a(456),o=a(2446),n=a(3764),l=a(1657),d=a(9008);let c=()=>{let[e,t]=(0,n.useState)(l.As[0]),[a]=(0,n.useState)((0,d.i_)()),[r,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{i(!0),t((0,d.j1)())},[]),(0,n.useEffect)(()=>{if(!r)return;let e=()=>{t((0,d.j1)())};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[r]),{currentTheme:e,themes:a,selectTheme:e=>{(0,d.hy)(e),t((0,d.j1)())},isClient:r}};var m=a(2788),u=a(4273),p=a(7146),h=a(2411);let x=e=>{let{className:t}=e;return(0,r.jsx)("div",{className:(0,o.cn)("relative",t),children:(0,r.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 -mt-4 -ml-2 h-8 w-4 text-primary-600",children:[(0,r.jsx)("div",{className:"absolute z-10 -ml-2 h-8 w-8 animate-bounce",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"animate-spin",fill:"currentColor",stroke:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 4c2.209 0 4 1.791 4 4s-1.791 4-4 4-4-1.791-4-4 1.791-4 4-4zM12.773 12.773c-1.275 1.275-2.97 1.977-4.773 1.977s-3.498-0.702-4.773-1.977-1.977-2.97-1.977-4.773c0-1.803 0.702-3.498 1.977-4.773l1.061 1.061c0 0 0 0 0 0-2.047 2.047-2.047 5.378 0 7.425 0.992 0.992 2.31 1.538 3.712 1.538s2.721-0.546 3.712-1.538c2.047-2.047 2.047-5.378 0-7.425l1.061-1.061c1.275 1.275 1.977 2.97 1.977 4.773s-0.702 3.498-1.977 4.773z"})})}),(0,r.jsx)("div",{className:"absolute -rotate-90 top-4 h-5 w-4 animate-bounce border-l-2 border-gray-200"}),(0,r.jsx)("div",{className:"absolute rotate-90 top-4 h-5 w-4 animate-bounce border-r-2 border-gray-200"})]})})};var g=a(8593),f=a(7337);function b(e){let{...t}=e;return(0,r.jsx)(f.bL,{"data-slot":"popover",...t})}function y(e){let{...t}=e;return(0,r.jsx)(f.l9,{"data-slot":"popover-trigger",...t})}function v(e){let{className:t,align:a="center",sideOffset:i=4,...s}=e;return(0,r.jsx)(f.ZL,{children:(0,r.jsx)(f.UC,{"data-slot":"popover-content",align:a,sideOffset:i,className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...s})})}var w=a(9378),j=a(6885),N=a(1513),k=a(7434),I=a(6258),S=a(7703);let C=(0,i.default)(()=>Promise.all([a.e(261),a.e(269),a.e(112),a.e(336)]).then(a.bind(a,8336)),{loadableGenerated:{webpack:()=>[8336]},ssr:!1,loading:()=>(0,r.jsx)(x,{className:"w-full h-full"})}),P=()=>(0,r.jsxs)("div",{className:"absolute w-full px-6 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col gap-4 text-center items-center justify-center",children:[(0,r.jsx)(w.A,{className:"size-20 text-secondary-600"}),(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"We're sorry — canvas editing works best on larger screens. Please use a device with at least a large tablet or desktop display for the best experience."})]}),A=e=>{let{currentTheme:t}=e,{selectTheme:a,themes:i}=c();return(0,r.jsx)("div",{className:"absolute top-3 right-1",children:(0,r.jsxs)(b,{children:[(0,r.jsx)(y,{asChild:!0,children:(0,r.jsx)(g.$,{variant:"secondary",className:"rounded-full p-0 w-8 h-8",children:(0,r.jsx)(j.A,{})})}),(0,r.jsx)(v,{align:"end",side:"bottom",className:"text-sm",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"text-gray-700 font-semibold",children:"Background"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:i.map((e,i)=>{let s=t.name===e.name;return(0,r.jsx)("div",{style:e.style,onClick:()=>a(e.name),className:(0,o.cn)("border border-gray-300 w-20 h-14 rounded-md hover:ring-2 ring-primary-600 cursor-pointer",s&&"ring-2 ring-primary-600")},i)})})]})})]})})},M=()=>{let{setCameraView:e}=(0,s.N)();return(0,r.jsxs)("div",{className:"absolute top-2 right-11 p-2 rounded-lg bg-primary-50/70 flex items-center gap-3",children:[(0,r.jsx)(N.A,{className:"size-6 text-primary-700"}),(0,r.jsx)("ul",{className:"flex flex-wrap gap-2",children:["top","side","front","orbit"].map((t,a)=>{var i;return(0,r.jsx)("li",{children:(0,r.jsx)(g.$,{type:"button",variant:"outline",className:"text-xs",size:"xs",onClick:()=>e(t),children:(null==t||null==(i=t[0])?void 0:i.toUpperCase())+(null==t?void 0:t.slice(1))})},a)})})]})},z=()=>{var e;let{scene:t,selectedFurnitureId:a,setSelectedFurnitureId:i,updatePlacedFurnitureById:o,removeFurnitureFromScene:n}=(0,s.N)(),{addNotification:l}=(0,u.i)(),d=(null==t||null==(e=t.furniture)?void 0:e.find(e=>e.id===a))||null,c=e=>{if(!d)return;let t=d.rotation[1]+e,a=[d.rotation[0],t,d.rotation[2]];o(d.id,{rotation:a})};return(0,r.jsx)(r.Fragment,{children:a&&(0,r.jsxs)(h.N,{children:[(0,r.jsxs)(p.Uu,{initial:{x:10,opacity:0},animate:{x:0,opacity:1},exit:{x:-10,opacity:0},transition:{duration:.4},className:"absolute top-1/2 -translate-y-1/2 right-2 flex flex-col gap-1 object-action bg-white border border-gray-300 rounded-lg p-1",children:[(0,r.jsx)(g.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),c(-Math.PI/8)},children:(0,r.jsx)(k.A,{className:"w-4 h-4 transform-[rotateX(-50deg)] transform-3d"})}),(0,r.jsx)(g.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),c(Math.PI/8)},children:(0,r.jsx)(I.A,{className:"w-4 h-4 transform-[rotateX(-50deg)] transform-3d"})}),(0,r.jsx)("hr",{}),(0,r.jsx)(g.$,{variant:"ghost-destructive",size:"icon",onClick:e=>{e.stopPropagation(),n(a),l({title:"Remove ".concat(null==d?void 0:d.name," from scene"),description:"",state:"success"}),i("")},children:(0,r.jsx)(S.A,{className:"w-4 h-4"})})]})," "]})})},D=()=>{var e;let{selectedFurnitureId:t,scene:a}=(0,s.N)(),i=(null==a||null==(e=a.furniture)?void 0:e.find(e=>e.id===t))||null;return(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsx)(h.N,{children:(0,r.jsxs)(p.Uu,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.4},className:(0,o.cn)("absolute bg-primary-50/50 flex-col border-2 border-primary-600 max-w-[80%] overflow-hidden px-3 py-0.5 text-sm text-gray-700 font-semibold flex items-center gap-0.5 bottom-2 right-2 shadow-xl rounded-lg"),children:[(0,r.jsxs)("p",{className:"break-word overflow-hidden line-clamp-1",children:[(0,r.jsxs)("span",{className:"text-gray-700 font-medium",children:["Selected Furniture:"," "]}),(0,r.jsx)("span",{className:"text-gray-900 font-semibold",children:null==i?void 0:i.name})]}),(0,r.jsx)("p",{className:"text-gray-500 text-xs font-normal line-clamp-1",children:"Category: Bedroom"})]})})})},R=e=>{let{className:t}=e,{currentTheme:a,isClient:i}=c(),s=(0,m.a)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{style:i?a.style:l.As[0].style,className:(0,o.cn)("relative border rounded-lg border-primary-300 overflow-hidden",t),children:[s?(0,r.jsx)(P,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C,{}),(0,r.jsx)(M,{})]}),(0,r.jsx)(A,{currentTheme:a}),(0,r.jsx)(z,{}),(0,r.jsx)(D,{})]})})}},8593:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var r=a(7096);a(3764);var i=a(8390),s=a(9752),o=a(2446);let n=(0,s.F)("inline-flex cursor-pointer whitespace-nowrap items-center justify-center gap-2 rounded-lg font-medium transition-all disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none outline-hidden aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary-600 text-white shadow-xs hover:bg-primary-700 border border-primary-600 hover:border-primary-700 focus:ring-4 ring-primary-shadow disabled:bg-gray-100 disabled:border-gray-200 disabled:text-gray-400 disabled:ring-0",destructive:"bg-error-600 text-white shadow-xs hover:bg-error-700 border border-error-600 hover:border-error-700 focus:ring-4 ring-error-shadow disabled:bg-gray-100 disabled:border-gray-200 disabled:text-gray-400 disabled:ring-0",outline:"bg-white text-primary-700 shadow-xs hover:bg-primary-50 border border-primary-300 focus:ring-4 ring-primary-shadow disabled:bg-white disabled:border-gray-200 disabled:text-gray-400 disabled:ring-0","outline-destructive":"bg-white text-error-700 shadow-xs hover:bg-error-50 border border-error-300 focus:ring-4 ring-error-shadow disabled:bg-white disabled:border-gray-200 disabled:text-gray-400 disabled:ring-0",secondary:"bg-white border border-gray-300 shadow-xs text-gray-700 hover:bg-gray-50 focus:ring-4 ring-gray-shadow disabled:bg-white disabled:border-gray-200 disabled:text-gray-400 disabled:ring-0",ghost:"text-primary-700 hover:text-primary-700 hover:bg-primary-50 disabled:text-gray-400","ghost-secondary":"text-gray-600 hover:text-gray-700 hover:bg-gray-50 disabled:text-gray-400","ghost-destructive":"text-error-600 hover:text-error-700 hover:bg-error-50 disabled:text-gray-400",link:"text-primary-700 w-fit hover:text-primary-800 disabled:text-gray-400 !p-0",icon:"text-gray-400 hover:text-gray-600 disabled:text-gray-300"},size:{default:"py-2.5 px-4 font-semibold",xs:"py-1.5 px-2.5 text-xs font-semibold",sm:"py-2 px-3 text-sm font-semibold",lg:"py-4 px-[22px] text-lg font-semibold",icon:"p-2"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:s,asChild:l=!1,...d}=e,c=l?i.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,o.cn)(n({variant:a,size:s,className:t})),...d})}},9008:(e,t,a)=>{"use strict";a.d(t,{hy:()=>o,i_:()=>n,j1:()=>s});var r=a(1657);let i="3d-room-simulator-theme",s=()=>{let e=localStorage.getItem(i);if(e){let t=r.As.find(t=>t.name===e);if(t)return t}return r.As[0]},o=e=>{r.As.some(t=>t.name===e)&&(localStorage.setItem(i,e),window.dispatchEvent(new Event("storage")))},n=()=>r.As},9333:(e,t,a)=>{"use strict";a.d(t,{Q:()=>o}),a(3764);var r=a(5106);a(9008);var i=a(3930);class s{async preloadModel(e){if(this.cache.has(e))return this.cache.get(e);if(this.loadingPromises.has(e))return this.loadingPromises.get(e);if(this.errorCache.has(e))throw Error("Model ".concat(e," has failed to load previously"));let t=new Promise((t,a)=>{this.gltfLoader.load(e,r=>{try{let a=new i.NRn().setFromObject(r.scene),s=new i.Pq0;a.getSize(s);let o={width:s.x,height:s.y,depth:s.z},n={scene:r.scene,dimensions:o};this.cache.set(e,n),this.loadingPromises.delete(e),t(n)}catch(t){console.error("Error calculating dimensions for ".concat(e,":"),t),this.errorCache.add(e),this.loadingPromises.delete(e),a(t)}},void 0,t=>{console.error("Failed to load model ".concat(e,":"),t),this.errorCache.add(e),this.loadingPromises.delete(e),a(t)})});return this.loadingPromises.set(e,t),t}storeModel(e,t,a){this.cache.set(e,{scene:t,dimensions:a})}getCachedModel(e){return this.cache.get(e)||null}isCached(e){return this.cache.has(e)}isLoading(e){return this.loadingPromises.has(e)}hasError(e){return this.errorCache.has(e)}markAsFailed(e){this.errorCache.add(e)}clearCache(){this.cache.clear(),this.loadingPromises.clear(),this.errorCache.clear()}cleanupUnusedModels(e){Array.from(this.cache.keys()).filter(t=>!e.includes(t)).forEach(e=>{this.cache.delete(e)})}constructor(){this.cache=new Map,this.loadingPromises=new Map,this.errorCache=new Set,this.gltfLoader=new r.B}}let o=new s}},e=>{e.O(0,[663,471,180,435,370,358],()=>e(e.s=5064)),_N_E=e.O()}]);