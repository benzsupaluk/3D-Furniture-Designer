"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[336],{8336:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(7096),r=a(6791),o=a(3764),i=a(1778),n=a(3402),l=a(1923),c=a(456),f=a(3930),d=a(8522),p=a(796);let u=()=>{let e=(0,o.useRef)(null),t=(0,o.useRef)(null),{gl:a,camera:r,scene:i}=(0,d.C)(),n=(0,p.v)(e=>e.setRefs);(0,o.useEffect)(()=>{n(a,i,r)},[a,i,r,n]),(0,d.D)(()=>{if(e.current){let t=e.current.material;t.opacity=+(r.position.x>=0),t.transparent=!0}if(t.current){let e=t.current.material;e.opacity=+(r.position.x<5),e.transparent=!0}});let l=(0,d.G)(f.Tap,"/images/textures/wood.webp"),c=(0,d.G)(f.Tap,"/images/textures/wallpaper.webp");return(0,s.jsxs)("group",{position:[0,-.1,0],children:[(0,s.jsxs)("mesh",{receiveShadow:!0,position:[0,0,0],children:[(0,s.jsx)("boxGeometry",{args:[10,.2,10]}),(0,s.jsx)("meshStandardMaterial",{color:"#bfa074",map:l})]}),(0,s.jsxs)("mesh",{receiveShadow:!0,position:[0,2.4,-5],children:[(0,s.jsx)("boxGeometry",{args:[10,5,.2]}),(0,s.jsx)("meshStandardMaterial",{color:"#fff",map:c})]}),(0,s.jsxs)("mesh",{ref:e,receiveShadow:!0,position:[-5.1,2.4,0],children:[(0,s.jsx)("boxGeometry",{args:[.2,5,10.2]}),(0,s.jsx)("meshStandardMaterial",{color:"#fff",map:c})]}),(0,s.jsxs)("mesh",{ref:t,receiveShadow:!0,position:[5.1,2.4,0],children:[(0,s.jsx)("boxGeometry",{args:[.2,5,10.2]}),(0,s.jsx)("meshStandardMaterial",{color:"#fff",map:c})]})]})};var h=a(947);let m=(0,r.default)(()=>Promise.all([a.e(51),a.e(942),a.e(341)]).then(a.bind(a,8341)),{loadableGenerated:{webpack:()=>[8341]},ssr:!1,loading:()=>(0,s.jsx)(s.Fragment,{})}),x=()=>{let e=(0,o.useRef)(null),t=(0,o.useRef)(null),a=(0,o.useRef)(null),{cameraView:r,scene:f,updatePlacedFurnitureById:d,selectedFurnitureId:p,setSelectedFurnitureId:x}=(0,c.N)(),j=e=>{x(e.id)},b=(e,t)=>{let a=f.furniture.filter(t=>t.id!==e.id);(0,h.E)(t,e,a)&&d(e.id,{position:t})},w=(e,t,a)=>{d(e.id,{scale:a,position:t})};(0,o.useEffect)(()=>{if(!e.current||!t.current)return;let a=e.current,s=t.current;switch(r){case"top":a.position.set(0,15,0),a.lookAt(0,0,0);break;case"side":a.position.set(15,5,0),a.lookAt(0,0,0);break;case"front":a.position.set(0,5,15),a.lookAt(20,0,5);break;case"orbit":a.position.set(8,8,8),a.lookAt(0,0,0)}s.update()},[r]);let g=!p;return(0,s.jsxs)(i.Hl,{onCreated:e=>{let{gl:t}=e;a.current=t},gl:{preserveDrawingBuffer:!0,toneMappingExposure:1},shadows:!0,onPointerMissed:e=>{var t;let a=e.target;(null==a||null==(t=a.closest)?void 0:t.call(a,".object-action"))||x("")},children:[(0,s.jsx)(n.u,{ref:e,makeDefault:!0,fov:60,near:.1,far:500,position:[3,8,11]}),(0,s.jsx)(l.N,{ref:t,enablePan:g,enableZoom:g,enableRotate:g,enableDamping:g,dampingFactor:.05,maxPolarAngle:Math.PI/2}),(0,s.jsx)("ambientLight",{intensity:4,color:"#ffffff"}),(0,s.jsx)("directionalLight",{position:[2,5,5],intensity:3,color:"#fff",castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":50,"shadow-camera-left":-5,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}),(0,s.jsx)("pointLight",{position:[-3,8,3],intensity:.1,color:"#ffffff",distance:20,decay:2}),(0,s.jsx)(o.Suspense,{fallback:null,children:(0,s.jsx)(u,{})}),f.furniture.map(e=>(0,s.jsx)(o.Suspense,{children:(0,s.jsx)(m,{furniture:e,onSelect:j,onMove:b,onScale:w,isSelected:p===e.id},e.id)},e.id))]})}}}]);